# 知乎使用时长监控插件

一个Chrome扩展，监控知乎网站使用时长，超时后提醒，帮助用户控制上网时间。

## ✨ 主要功能

### 1. **使用时长监控**
- 自动监控 `zhihu.com` 及相关子域名网站的使用时长
- 精确到秒的时长统计
- 每天0点自动重置使用时长

### 2. **实时计时器显示**
- 在知乎页面右下角显示实时使用时长
- 格式：`X小时Y分钟`（精确到分钟）
- 智能颜色提醒：
  - 🟢 默认：黑色半透明
  - 🟡 30分钟以上：黄色警告
  - 🔴 1小时以上：红色警告
- 点击计时器可切换透明度（30% ↔ 100%）

### 3. **超时提醒系统**
- 超过设定时长后弹出提醒对话框
- 显示精确的使用时长（小时:分钟:秒）
- 点击"确认"后弹窗消失
- 可自定义弹窗重复间隔（1-60秒）
- 如果继续停留在页面，弹窗会按设定间隔重复出现

### 4. **设置界面**
- 美观的现代化设置界面
- 可设置每日使用时长限制（小时/分钟/秒）
- 可设置弹窗提醒间隔时间（秒）
- 保存后自动关闭设置界面
- 支持动画效果和状态反馈

## 🚀 安装方法

### 方法一：开发者模式安装
1. 下载项目文件到本地
2. 打开Chrome浏览器，访问 `chrome://extensions/`
3. 开启右上角的"开发者模式"
4. 点击"加载已解压的扩展程序"
5. 选择项目文件夹
6. 安装完成！

### 方法二：打包安装
1. 在 `chrome://extensions/` 页面点击"打包扩展程序"
2. 选择项目文件夹
3. 生成 `.crx` 文件后拖拽安装

## 📖 使用指南

### 首次使用
1. 安装插件后，点击浏览器工具栏中的插件图标
2. 在设置界面中设置每日使用时长限制
3. 设置弹窗提醒间隔时间（建议5-10秒）
4. 点击"保存设置"完成配置

### 日常使用
1. 正常访问知乎网站
2. 右下角会显示实时使用时长
3. 超过设定时长后会自动弹出提醒
4. 点击"确认"关闭提醒，弹窗会按设定间隔重复出现

### 计时器操作
- **查看时长**：右下角计时器实时显示
- **切换透明度**：点击计时器可隐藏/显示
- **颜色提醒**：根据使用时长自动变色

## ⚙️ 技术特性

### 核心技术
- **Chrome Extension Manifest V3**：使用最新的扩展标准
- **Service Worker**：后台脚本，持续监控使用时长
- **Content Scripts**：页面注入，显示计时器和提醒
- **Chrome Storage API**：本地数据持久化存储
- **Chrome Tabs API**：标签页状态监控

### 性能优化
- 后台脚本每10秒更新一次使用时长
- 计时器显示精确到分钟，避免频繁更新
- 智能错误处理和异常恢复
- 内存泄漏防护和资源清理

### 用户体验
- 现代化UI设计，美观易用
- 流畅的动画效果
- 响应式交互设计
- 直观的颜色提醒系统

## 📁 文件结构

```
Anti_addiction/
├── manifest.json          # 插件配置文件
├── background.js          # 后台监控脚本
├── content.js            # 页面内容脚本
├── popup.html            # 设置界面HTML
├── popup.js              # 设置界面脚本
└── README.md             # 说明文档
```

### 文件说明
- **`manifest.json`**：插件配置，权限声明，脚本注册
- **`background.js`**：核心监控逻辑，时长统计，提醒触发
- **`content.js`**：页面计时器显示，提醒对话框
- **`popup.html`**：设置界面，时长和间隔配置
- **`popup.js`**：设置界面交互逻辑

## 🔧 配置选项

### 使用时长限制
- **小时**：0-24小时
- **分钟**：0-59分钟  
- **秒**：0-59秒
- **总计**：最小1秒，最大24小时

### 弹窗间隔设置
- **范围**：1-60秒
- **默认**：5秒
- **建议**：5-10秒（平衡提醒效果和用户体验）

## 🐛 故障排除

### 常见问题
1. **计时器不显示**
   - 检查是否在知乎网站
   - 重新加载插件
   - 刷新页面

2. **设置不生效**
   - 确保点击了"保存设置"
   - 检查设置值是否有效
   - 重新加载插件

3. **提醒不弹出**
   - 检查使用时长是否超过限制
   - 确认弹窗间隔设置
   - 检查浏览器通知权限

### 调试方法
1. 打开开发者工具（F12）
2. 查看Console面板的错误信息
3. 检查Chrome扩展管理页面的错误提示

## 📝 更新日志

### v1.0
- ✅ 基础使用时长监控功能
- ✅ 实时计时器显示
- ✅ 超时提醒对话框
- ✅ 设置界面（时长限制 + 弹窗间隔）
- ✅ 现代化UI设计
- ✅ 智能颜色提醒系统
- ✅ 性能优化和错误处理

## 🤝 贡献

欢迎提交Issue和Pull Request来改进这个项目！

## 📄 许可证

MIT License - 详见LICENSE文件

---

**注意**：此插件仅用于个人时间管理，请合理使用，避免过度依赖。 